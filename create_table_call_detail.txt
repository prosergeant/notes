CREATE TABLE `call_detail` (
  `id` binary(16) DEFAULT NULL COMMENT 'ID',
  `pkid` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Surrogate primary key',
  `agg_run_id` binary(16) NOT NULL COMMENT 'aggregator run that produced this record',
  `media_type` enum('VOICE','CHAT','EMAIL','FORUM','WORKITEM','LEAD') DEFAULT NULL,
  `start_time` datetime NOT NULL COMMENT 'time the call started',
  `ivr_time` bigint(20) NOT NULL COMMENT 'time spent in ivr',
  `queue_time` bigint(20) NOT NULL COMMENT 'time spent in queue',
  `pending_time` bigint(20) NOT NULL COMMENT 'dialing/ringing time',
  `talk_time` bigint(20) NOT NULL COMMENT 'talk time (excluding hold_time)',
  `hold_time` bigint(20) NOT NULL COMMENT 'hold time',
  `held` bigint(20) NOT NULL,
  `max_hold` bigint(20) NOT NULL,
  `acw_time` bigint(20) NOT NULL COMMENT 'time spent doing after call work',
  `duration` bigint(20) NOT NULL COMMENT 'duration of the call',
  `service_name` varchar(255) DEFAULT NULL COMMENT 'service associated with the call',
  `scenario_name` varchar(255) DEFAULT NULL COMMENT 'scenario name',
  `trunk_description` varchar(255) DEFAULT NULL COMMENT 'Trunk description for inbound and outgoing calls',
  `caller_login_id` varchar(255) DEFAULT NULL COMMENT 'login ID of agent making the call, if any',
  `callee_login_id` varchar(255) DEFAULT NULL COMMENT 'login ID of agent receiving the call, if any',
  `caller_phone_type` enum('INTERNAL','EXTERNAL') DEFAULT NULL COMMENT 'caller phone type',
  `callee_phone_type` enum('INTERNAL','EXTERNAL') DEFAULT NULL COMMENT 'callee phone type',
  `caller_rank` varchar(255) DEFAULT NULL COMMENT 'Agent rank of agent making the call, if any',
  `callee_rank` varchar(255) DEFAULT NULL COMMENT 'Agent rank of agent making the call, if any',
  `from_phone` varchar(255) DEFAULT NULL COMMENT 'originating phone number',
  `original_destination_phone` varchar(255) DEFAULT NULL COMMENT 'dialed phone number',
  `connected_to_phone` varchar(255) DEFAULT NULL COMMENT 'connected to phone number',
  `transferred_from_phone` varchar(255) DEFAULT NULL COMMENT 'for transferred legs, the phone that did the transfer',
  `disposition` enum('CALLER_TERMINATED','CALLEE_TERMINATED','TRANSFERRED','CONFERENCED','SYSTEM_DISCONNECTED','SELF_SERVICE','ABANDONED','ABANDONED_QUEUE','ABANDONED_RINGING','NO_ANSWER','CALLED_PARTY_BUSY','NETWORK_BUSY','CALLER_TRANSFERRED','CALLBACK_REQUESTED','REPLIED','CLOSED_WITHOUT_REPLY','SENT','DISCARDED','SERVICE_CHANGED','CLOSED_BY_OTHER_RESPONSE','FORWARDED') DEFAULT NULL COMMENT 'Who/how ended the call',
  `agent_disposition_name` varchar(255) DEFAULT NULL,
  `agent_disposition_code` int(11) DEFAULT NULL,
  `agent_disposition_notes` longtext,
  `reported_problem` enum('CALL_WENT_SILENT','CALL_DROPPED','POOR_VOICE_QUALITY','OTHER') DEFAULT NULL,
  `global_interaction_id` varchar(255) DEFAULT NULL,
  `initial_call_id` binary(16) DEFAULT NULL COMMENT 'For transferred calls, id of the first call in a transfer chain. For normal calls, the same as id',
  `initial_start_time` datetime DEFAULT NULL COMMENT 'For transferred calls, start_time of the first call in a transfer chain. For normal calls, the same as start_time',
  `initial_service_name` varchar(255) DEFAULT NULL,
  `initial_caller_phone_type` enum('INTERNAL','EXTERNAL') DEFAULT NULL,
  `initial_callee_phone_type` enum('INTERNAL','EXTERNAL') DEFAULT NULL,
  `initial_from_phone` varchar(255) DEFAULT NULL,
  `initial_original_destination_phone` varchar(255) DEFAULT NULL,
  `initial_connected_to_phone` varchar(255) DEFAULT NULL,
  `flagged` bit(1) DEFAULT NULL COMMENT 'flagged for review',
  `voice_signature` bit(1) DEFAULT NULL COMMENT 'this interaction marked as having customer voice signature',
  `account_number` varchar(255) DEFAULT NULL COMMENT 'customer account number',
  `caller_first_name` varchar(255) DEFAULT NULL,
  `callee_first_name` varchar(255) DEFAULT NULL,
  `caller_last_name` varchar(255) DEFAULT NULL,
  `callee_last_name` varchar(255) DEFAULT NULL,
  `caller_city` varchar(255) DEFAULT NULL,
  `callee_city` varchar(255) DEFAULT NULL,
  `caller_country` varchar(255) DEFAULT NULL,
  `callee_country` varchar(255) DEFAULT NULL,
  `email_id` varchar(48) DEFAULT NULL,
  `email_subject` varchar(1024) DEFAULT NULL,
  `email_language` varchar(255) DEFAULT NULL,
  `case_id` varchar(48) DEFAULT NULL,
  `thread_id` varchar(48) DEFAULT NULL,
  `case_number` varchar(48) DEFAULT NULL,
  `case_search_result` varchar(48) DEFAULT NULL,
  `response_email_id` varchar(48) DEFAULT NULL,
  `caller_monitored` bit(1) DEFAULT NULL,
  `callee_monitored` bit(1) DEFAULT NULL,
  `caller_interaction_step_id` binary(16) DEFAULT NULL,
  `callee_interaction_step_id` binary(16) DEFAULT NULL,
  `caller_cpa_rtp_server_id` binary(16) DEFAULT NULL,
  `caller_cpa_recording_url` varchar(255) DEFAULT NULL,
  `caller_encryption_key_id` binary(16) DEFAULT NULL,
  `callee_cpa_rtp_server_id` binary(16) DEFAULT NULL,
  `callee_cpa_recording_url` varchar(255) DEFAULT NULL,
  `callee_encryption_key_id` binary(16) DEFAULT NULL,
  `caller_has_screen_recording` bit(1) DEFAULT NULL,
  `callee_has_screen_recording` bit(1) DEFAULT NULL,
  `caller_interaction_id` binary(16) DEFAULT NULL,
  `callee_interaction_id` binary(16) DEFAULT NULL,
  `caller_has_voice_recording` bit(1) DEFAULT NULL,
  `callee_has_voice_recording` bit(1) DEFAULT NULL,
  `voice_recording_banned` bit(1) DEFAULT NULL,
  `monitoring_banned` bit(1) DEFAULT NULL,
  `email_detail_id` varchar(48) DEFAULT NULL,
  `email_completion_time` bigint(20) NOT NULL,
  `email_kb_article_id` varchar(48) DEFAULT NULL,
  `caller_team_name` varchar(255) DEFAULT NULL,
  `callee_team_name` varchar(255) DEFAULT NULL,
  `detail_record_count` int(11) DEFAULT NULL,
  `in_service_level` varchar(10) DEFAULT NULL,
  `custom1` varchar(255) DEFAULT NULL,
  `custom2` varchar(255) DEFAULT NULL,
  `custom3` varchar(255) DEFAULT NULL,
  `custom4` varchar(255) DEFAULT NULL,
  `custom5` varchar(255) DEFAULT NULL,
  `sentiment` decimal(5,3) DEFAULT NULL,
  `erased_voice_recording` bit(1) DEFAULT NULL,
  `erased_voice_signature` bit(1) DEFAULT NULL,
  `erased_chat_transcript` bit(1) DEFAULT NULL,
  `erased_email` bit(1) DEFAULT NULL,
  `erased_screen_recording` bit(1) DEFAULT NULL,
  `ewt` bigint(20) DEFAULT NULL,
  `cobrowsing` bit(1) DEFAULT NULL,
  PRIMARY KEY (`pkid`),
  UNIQUE KEY `i_email_detail_id` (`email_detail_id`),
  UNIQUE KEY `i_call_detail_u_id` (`id`),
  KEY `i_time` (`start_time`),
  KEY `i_initial_time` (`initial_start_time`),
  KEY `i_original_destination_phone` (`original_destination_phone`),
  KEY `i_from_phone` (`from_phone`),
  KEY `i_connected_to_phone` (`connected_to_phone`),
  KEY `i_email_id` (`email_id`),
  KEY `i_response_email_id` (`response_email_id`),
  KEY `i_initial_call_id` (`initial_call_id`),
  KEY `i_caller_interaction_id` (`caller_interaction_id`),
  KEY `i_callee_interaction_id` (`callee_interaction_id`),
  KEY `i_global_interaction_id` (`global_interaction_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1002778 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC